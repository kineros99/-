<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Encarregado - Lojas de Material de Construção RJ</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.Default.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css" />
</head>
<body>
    <header>
        <button id="toggle-sidebar-btn"><i class="fas fa-bars"></i></button>
        <span>🏗️ constru Facil </span>
        <a href="admin.html" id="admin-btn" title="Admin Panel">
            <i class="fas fa-cog"></i>
        </a>
    </header>

    <div id="overlay"></div>

    <div class="wrapper">
        <div id="sidebar">
            <div class="filter-section">
                <h2><i class="fas fa-sliders-h"></i> Filtros</h2>
                <div style="margin-top: 15px;">
                    <input type="text" id="searchInput" placeholder="🔍 Buscar por nome ou endereço...">
                </div>

                <label for="bairro-filter"><i class="fas fa-map-marker-alt"></i> Bairro</label>
                <select id="bairro-filter">
                    <option value="">Todos os bairros</option>
                    <!-- Bairros carregados dinamicamente do banco de dados -->
                </select>

                <label for="category-filter"><i class="fas fa-tags"></i> Tipo de Material</label>
                <select id="category-filter">
                    <option value="all">Todos os Tipos</option>
                    <option value="paint">🎨 Tintas</option>
                    <option value="lumber">🪵 Madeira</option>
                    <option value="plumbing">🔧 Hidráulica</option>
                    <option value="hardware">🔨 Ferragens</option>
                    <option value="general">🏗️ Material de Construção</option>
                    <option value="unknown">❓ Não Categorizado</option>
                </select>

                <label for="source-filter"><i class="fas fa-filter"></i> Fonte dos Dados</label>
                <select id="source-filter">
                    <option value="all">Todas as Lojas</option>
                    <option value="user">🙂 Apenas Usuários</option>
                    <option value="auto">🙃 Apenas Auto-populadas</option>
                    <option value="verified">🧵 Apenas Verificadas</option>
                </select>

                <label for="radius-filter"><i class="fas fa-circle-notch"></i> Raio de Busca</label>
                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                    <input type="range" id="radius-slider" min="1" max="50" value="50" style="flex: 1;">
                    <span id="radius-value" style="min-width: 50px; font-weight: bold; color: var(--primary-blue);">50 km</span>
                </div>
                <small style="color: #666; display: block; margin-top: -5px; margin-bottom: 10px;">
                    Use o botão 📍 para ativar busca por raio
                </small>

                <div class="btn-group">
                    <button class="btn" id="filter-btn">
                        <i class="fas fa-search"></i> Buscar
                    </button>
                    <button class="btn" id="geolocate-btn" title="Minha Localização">
                        <i class="fas fa-location-arrow"></i>
                    </button>
                </div>

                <button class="btn" id="reset-btn"><i class="fas fa-redo"></i> Limpar Filtro</button>
                <button class="btn special" id="open-register-modal-btn"><i class="fas fa-plus-circle"></i> Cadastre sua Loja</button>
            </div>

            <div class="results-header">
                <h3><i class="fas fa-store"></i> Lojas</h3>
                <span id="resultsCount" class="results-count">0</span>
            </div>
            <div id="lojasList"></div>
        </div>
        <div id="map"></div>
    </div>

    <div id="register-modal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2>Cadastre ou Gerencie sua Loja</h2>
            <p>Insira um nome de usuário único. Se não existir, será criado junto com a sua loja.</p>
            <form id="register-form">
                <div class="form-section">
                    <h4>Identificação</h4>
                    <label for="username">Nome de Usuário (único)</label>
                    <input type="text" id="username" name="username" required placeholder="Ex: amoedobotafogo">
                </div>
                <div class="form-section">
                    <h4>Dados da Loja</h4>
                    <label for="nome">Nome da Loja</label>
                    <input type="text" id="nome" name="nome" required>
                    <label for="endereco">Endereço Completo</label>
                    <input type="text" id="endereco" name="endereco" required placeholder="Rua, Número, Bairro, Cidade, Estado">
                    <label for="categoria">Categoria</label>
                    <input type="text" id="categoria" name="categoria" placeholder="Material de Construção">
                    <label for="telefone">Telefone</label>
                    <input type="tel" id="telefone" name="telefone">
                    <label for="website">Website (opcional)</label>
                    <input type="url" id="website" name="website" placeholder="https://sualoja.com">
                </div>
                <button type="submit" id="submit-button">Cadastrar Loja</button>
                <div id="form-message"></div>
            </form>
        </div>
    </div>

    <footer id="partner-footer">
        <div class="partner-container">
            <div class="partner-logo-slot"></div>
            <div class="partner-logo-slot"></div>
            <div class="partner-logo-slot"></div>
            <div class="partner-logo-slot"></div>
            <div class="partner-logo-slot"></div>
        </div>
    </footer>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet.markercluster/dist/leaflet.markercluster.js"></script>
    <script src="script.js"></script>
</body>
</html>